<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-modules/BCC/reference">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Shopper Approved - Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Shopper Approved - Docs Atom Feed"><title data-rh="true">API Reference | Shopper Approved - Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://44.227.73.74/docs/modules/BCC/reference"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="API Reference | Shopper Approved - Docs"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://44.227.73.74/docs/modules/BCC/reference"><link data-rh="true" rel="alternate" href="http://44.227.73.74/docs/modules/BCC/reference" hreflang="en"><link data-rh="true" rel="alternate" href="http://44.227.73.74/docs/modules/BCC/reference" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.5627add0.css">
<link rel="preload" href="/assets/js/runtime~main.3df98ca2.js" as="script">
<link rel="preload" href="/assets/js/main.cf28233e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Shopper Approved Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Shopper Approved Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Docs</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/introduction">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/architecture/building-blocks/authentication/reference">architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/getting-started/introduction">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/modules/BCC/intro">Modules</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/modules/BCC/intro">BCC</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/BCC/intro">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/modules/BCC/reference">API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/BCC/routes">Routes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/modules/Evidence/reference">Evidence</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Modules</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">BCC</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">API Reference</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>API Reference</h1><hr><h2 class="anchor anchorWithStickyNavbar_mojV" id="sidebar_position-1">sidebar_position: 1<a class="hash-link" href="#sidebar_position-1" title="Direct link to heading">‚Äã</a></h2><h2 class="anchor anchorWithStickyNavbar_mojV" id="bcctoolcontroller">BccToolController<a class="hash-link" href="#bcctoolcontroller" title="Direct link to heading">‚Äã</a></h2><p> extends Controller</p><p> in package</p><ul><li><a href="/docs/modules/BCC/packages/Application.html">Application</a></li></ul><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 22</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="table-of-contents">Table of Contents<a class="hash-link" href="#table-of-contents" title="Direct link to heading">‚Äã</a></h3><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_archiveBcc">archiveBcc()</a></p><p> ¬†: JsonResponse </p><p>This method used to archive the unmapped requests</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_archiveBccMapping">archiveBccMapping()</a></p><p> ¬†: JsonResponse </p><p>This method used to archive the active campaigns</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_bccTool">bccTool()</a></p><p> ¬†: array&lt;string|int, mixed&gt;|Factory|RedirectResponse|View|mixed </p><p>This method handles the main view for bcc tool
It contains 2 partials (Active campaigns and unmapped requests)</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_checkBccMapping">checkBccMapping()</a></p><p> ¬†: bool </p><p>This methods checks if any active campaign exists for incoming email</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_checkTbodyOccurrence">checkTbodyOccurrence()</a></p><p> ¬†: bool </p><p>verify in html if tbody exists in html or not</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_cleanHtml">cleanHtml()</a></p><p> ¬†: mixed </p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_cleanPath">cleanPath()</a></p><p> ¬†: mixed </p><p>this methods clean the xpath and check for tbody too
if tbody exists in html then tbody tag is added to xpath otherwise replaced with //tr</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_getAddress">getAddress()</a></p><p> ¬†: mixed </p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_getDomChilds">getDomChilds()</a></p><p> ¬†: array&lt;string|int, mixed&gt; </p><p>This method is used to get the products array from given html</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_getDomNodeValue">getDomNodeValue()</a></p><p> ¬†: bool </p><p>This function is used to get the Node value for given xpath
e.g (/html/body/center/div<!-- -->[2]<!-- -->/table<!-- -->[2]<!-- -->/tbody/tr<!-- -->[2]<!-- -->/td/table/tbody/tr<!-- -->[1]<!-- -->/td/p<!-- -->[2]<!-- -->/strong/text()<!-- -->[1]<!-- -->)
above xpath will be given to get the order id from given html string</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_getMappingView">getMappingView()</a></p><p> ¬†: JsonResponse|RedirectResponse </p><p>This method is used to get the mapping view for mapping emails
This method handles 3 views (editing the unmapped requests, editing active campaigns, uploading the eml file)</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_getNameFromHeader">getNameFromHeader()</a></p><p> ¬†: mixed </p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_insertOrUpdateFeedback">insertOrUpdateFeedback()</a></p><p> ¬†: int|mixed </p><p>This methods stores the data parsed from emails on basis of mapping</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_parseAdditionalProducts">parseAdditionalProducts()</a></p><p> ¬†: JsonResponse </p><p>This method is used to parse the additional products from emails when product name is mapped in email
it gets all the products from emails when xpath for parents table and product is given</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_parseBccEmail">parseBccEmail()</a></p><p> ¬†: mixed </p><p>This method is used to parse the emails (it can be called from browser<!-- -->[parseEmail]<!-- -->
and from cron<!-- -->[BccToolEmailParser]<!-- -->)</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_parseBccEmailBkp">parseBccEmailBkp()</a></p><p> ¬†: mixed </p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_parseBccEmails">parseBccEmails()</a></p><p> ¬†: mixed </p><p>This method is used by sendgrid webhook that posts the email data
It stores the incoming data to BccEmails table</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_parseEmail">parseEmail()</a></p><p> ¬†: mixed </p><p>This method is used to check if mapping is working fine or not (in browser)
e.g <a href="http://local.sa/account/admin/emails/parse-bcc-email?bccid=880424&amp;mappingid=33" target="_blank" rel="noopener noreferrer">http://local.sa/account/admin/emails/parse-bcc-email?bccid=880424&amp;mappingid=33</a></p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_processUnmappedRequests">processUnmappedRequests()</a></p><p> ¬†: JsonResponse </p><p>This method handles the job queue on basis of mapping for recent saved active campaign</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_removeScriptsUsingDom">removeScriptsUsingDom()</a></p><p> ¬†: mixed </p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_saveEmailMapping">saveEmailMapping()</a></p><p> ¬†: false|string </p><p>This method is used to save the mapping from front end
important param is mapping (It contains all xpaths for all data that needs to be parsed)</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_stringBetweenTwoStrings">stringBetweenTwoStrings()</a></p><p> ¬†: bool|string </p><p>This function is used to return the string between two strings
based on conditions if starting &amp; ending strings are empty or not</p><p><a href="/docs/modules/BCC/classes/App-Http-Controllers-BccToolController.html#method_validateEmailFile">validateEmailFile()</a></p><p> ¬†: JsonResponse </p><p>This method is used to validate the input eml format file that is uploaded from front end</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="methods">Methods<a class="hash-link" href="#methods" title="Direct link to heading">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="archivebcc">archiveBcc()<a class="hash-link" href="#archivebcc" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 586</p><p>This method used to archive the unmapped requests</p><p><code>public
static archiveBcc(Request¬†$request) : JsonResponse</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters">Parameters<a class="hash-link" href="#parameters" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values">Return values<a class="hash-link" href="#return-values" title="Direct link to heading">‚Äã</a></h5><p>JsonResponse
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="archivebccmapping">archiveBccMapping()<a class="hash-link" href="#archivebccmapping" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 603</p><p>This method used to archive the active campaigns</p><p><code>public
static archiveBccMapping(Request¬†$request) : JsonResponse</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-1">Parameters<a class="hash-link" href="#parameters-1" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-1">Return values<a class="hash-link" href="#return-values-1" title="Direct link to heading">‚Äã</a></h5><p>JsonResponse
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="bcctool">bccTool()<a class="hash-link" href="#bcctool" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 31</p><p>This method handles the main view for bcc tool
It contains 2 partials (Active campaigns and unmapped requests)</p><p><code>public
bccTool(Request¬†$request) : array&lt;string|int, mixed&gt;|Factory|RedirectResponse|View|mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-2">Parameters<a class="hash-link" href="#parameters-2" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-2">Return values<a class="hash-link" href="#return-values-2" title="Direct link to heading">‚Äã</a></h5><p>array&lt;string|int, mixed&gt;|Factory|RedirectResponse|View|mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="checkbccmapping">checkBccMapping()<a class="hash-link" href="#checkbccmapping" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 678</p><p>This methods checks if any active campaign exists for incoming email</p><p><code>public
checkBccMapping(¬†$emailData, ¬†$mapping) : bool</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-3">Parameters<a class="hash-link" href="#parameters-3" title="Direct link to heading">‚Äã</a></h5><p>$emailData : </p><p>$mapping : </p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-3">Return values<a class="hash-link" href="#return-values-3" title="Direct link to heading">‚Äã</a></h5><p>bool
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="checktbodyoccurrence">checkTbodyOccurrence()<a class="hash-link" href="#checktbodyoccurrence" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 457</p><p>verify in html if tbody exists in html or not</p><p><code>public
checkTbodyOccurrence(¬†$html) : bool</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-4">Parameters<a class="hash-link" href="#parameters-4" title="Direct link to heading">‚Äã</a></h5><p>$html : </p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-4">Return values<a class="hash-link" href="#return-values-4" title="Direct link to heading">‚Äã</a></h5><p>bool
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="cleanhtml">cleanHtml()<a class="hash-link" href="#cleanhtml" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 499</p><p><code>public
cleanHtml(mixed¬†$html) : mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-5">Parameters<a class="hash-link" href="#parameters-5" title="Direct link to heading">‚Äã</a></h5><p>$html : mixed</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-5">Return values<a class="hash-link" href="#return-values-5" title="Direct link to heading">‚Äã</a></h5><p>mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="cleanpath">cleanPath()<a class="hash-link" href="#cleanpath" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 443</p><p>this methods clean the xpath and check for tbody too
if tbody exists in html then tbody tag is added to xpath otherwise replaced with //tr</p><p><code>public
cleanPath(¬†$path[, null¬†$html = null ]) : mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-6">Parameters<a class="hash-link" href="#parameters-6" title="Direct link to heading">‚Äã</a></h5><p>$path : </p><p>$html : null
= null </p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-6">Return values<a class="hash-link" href="#return-values-6" title="Direct link to heading">‚Äã</a></h5><p>mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="getaddress">getAddress()<a class="hash-link" href="#getaddress" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 118</p><p><code>public
getAddress(mixed¬†$parser, mixed¬†$param) : mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-7">Parameters<a class="hash-link" href="#parameters-7" title="Direct link to heading">‚Äã</a></h5><p>$parser : mixed</p><p>$param : mixed</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-7">Return values<a class="hash-link" href="#return-values-7" title="Direct link to heading">‚Äã</a></h5><p>mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="getdomchilds">getDomChilds()<a class="hash-link" href="#getdomchilds" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 379</p><p>This method is used to get the products array from given html</p><p><code>public
getDomChilds(¬†$productMasterPath, ¬†$html, ¬†$secondryPath) : array&lt;string|int, mixed&gt;</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-8">Parameters<a class="hash-link" href="#parameters-8" title="Direct link to heading">‚Äã</a></h5><p>$productMasterPath : </p><p>(xpath for the parent table which contains all the products)</p><p>$html : </p><p>(html string which will be used to parse the data)</p><p>$secondryPath : </p><p>(xpath for specific product name or id to parse product name from given html)</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-8">Return values<a class="hash-link" href="#return-values-8" title="Direct link to heading">‚Äã</a></h5><p>array&lt;string|int, mixed&gt;
‚Äî
(product array that will contain the value and xpath of those products)</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="getdomnodevalue">getDomNodeValue()<a class="hash-link" href="#getdomnodevalue" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 356</p><p>This function is used to get the Node value for given xpath
e.g (/html/body/center/div<!-- -->[2]<!-- -->/table<!-- -->[2]<!-- -->/tbody/tr<!-- -->[2]<!-- -->/td/table/tbody/tr<!-- -->[1]<!-- -->/td/p<!-- -->[2]<!-- -->/strong/text()<!-- -->[1]<!-- -->)
above xpath will be given to get the order id from given html string</p><p><code>public
getDomNodeValue(¬†$path, ¬†$html) : bool</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-9">Parameters<a class="hash-link" href="#parameters-9" title="Direct link to heading">‚Äã</a></h5><p>$path : </p><p>$html : </p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-9">Return values<a class="hash-link" href="#return-values-9" title="Direct link to heading">‚Äã</a></h5><p>bool
‚Äî
| node value</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="getmappingview">getMappingView()<a class="hash-link" href="#getmappingview" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 83</p><p>This method is used to get the mapping view for mapping emails
This method handles 3 views (editing the unmapped requests, editing active campaigns, uploading the eml file)</p><p><code>public
getMappingView(Request¬†$request) : JsonResponse|RedirectResponse</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-10">Parameters<a class="hash-link" href="#parameters-10" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="tags">Tags<a class="hash-link" href="#tags" title="Direct link to heading">‚Äã</a></h5><p>throws</p><p>Throwable</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-10">Return values<a class="hash-link" href="#return-values-10" title="Direct link to heading">‚Äã</a></h5><p>JsonResponse|RedirectResponse
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="getnamefromheader">getNameFromHeader()<a class="hash-link" href="#getnamefromheader" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 245</p><p><code>public
getNameFromHeader(mixed¬†$path) : mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-11">Parameters<a class="hash-link" href="#parameters-11" title="Direct link to heading">‚Äã</a></h5><p>$path : mixed</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-11">Return values<a class="hash-link" href="#return-values-11" title="Direct link to heading">‚Äã</a></h5><p>mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="insertorupdatefeedback">insertOrUpdateFeedback()<a class="hash-link" href="#insertorupdatefeedback" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 557</p><p>This methods stores the data parsed from emails on basis of mapping</p><p><code>public
static insertOrUpdateFeedback(¬†$customerName, ¬†$emailTo, ¬†$orderId, ¬†$OrderDate, ¬†$siteObject, ¬†$mappings) : int|mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-12">Parameters<a class="hash-link" href="#parameters-12" title="Direct link to heading">‚Äã</a></h5><p>$customerName : </p><p>$emailTo : </p><p>$orderId : </p><p>$OrderDate : </p><p>$siteObject : </p><p>$mappings : </p><h5 class="anchor anchorWithStickyNavbar_mojV" id="tags-1">Tags<a class="hash-link" href="#tags-1" title="Direct link to heading">‚Äã</a></h5><p>throws</p><p>Exception</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-12">Return values<a class="hash-link" href="#return-values-12" title="Direct link to heading">‚Äã</a></h5><p>int|mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="parseadditionalproducts">parseAdditionalProducts()<a class="hash-link" href="#parseadditionalproducts" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 621</p><p>This method is used to parse the additional products from emails when product name is mapped in email
it gets all the products from emails when xpath for parents table and product is given</p><p><code>public
parseAdditionalProducts(Request¬†$request) : JsonResponse</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-13">Parameters<a class="hash-link" href="#parameters-13" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-13">Return values<a class="hash-link" href="#return-values-13" title="Direct link to heading">‚Äã</a></h5><p>JsonResponse
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="parsebccemail">parseBccEmail()<a class="hash-link" href="#parsebccemail" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 264</p><p>This method is used to parse the emails (it can be called from browser<!-- -->[parseEmail]<!-- -->
and from cron<!-- -->[BccToolEmailParser]<!-- -->)</p><p><code>public
parseBccEmail(¬†$emailData, ¬†$mappings) : mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-14">Parameters<a class="hash-link" href="#parameters-14" title="Direct link to heading">‚Äã</a></h5><p>$emailData : </p><p>$mappings : </p><h5 class="anchor anchorWithStickyNavbar_mojV" id="tags-2">Tags<a class="hash-link" href="#tags-2" title="Direct link to heading">‚Äã</a></h5><p>throws</p><p>Exception</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-14">Return values<a class="hash-link" href="#return-values-14" title="Direct link to heading">‚Äã</a></h5><p>mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="parsebccemailbkp">parseBccEmailBkp()<a class="hash-link" href="#parsebccemailbkp" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 325</p><p><code>public
parseBccEmailBkp(mixed¬†$emailData, mixed¬†$mapping) : mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-15">Parameters<a class="hash-link" href="#parameters-15" title="Direct link to heading">‚Äã</a></h5><p>$emailData : mixed</p><p>$mapping : mixed</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-15">Return values<a class="hash-link" href="#return-values-15" title="Direct link to heading">‚Äã</a></h5><p>mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="parsebccemails">parseBccEmails()<a class="hash-link" href="#parsebccemails" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 643</p><p>This method is used by sendgrid webhook that posts the email data
It stores the incoming data to BccEmails table</p><p><code>public
parseBccEmails(Request¬†$request) : mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-16">Parameters<a class="hash-link" href="#parameters-16" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-16">Return values<a class="hash-link" href="#return-values-16" title="Direct link to heading">‚Äã</a></h5><p>mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="parseemail">parseEmail()<a class="hash-link" href="#parseemail" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 228</p><p>This method is used to check if mapping is working fine or not (in browser)
e.g <a href="http://local.sa/account/admin/emails/parse-bcc-email?bccid=880424&amp;mappingid=33" target="_blank" rel="noopener noreferrer">http://local.sa/account/admin/emails/parse-bcc-email?bccid=880424&amp;mappingid=33</a></p><p><code>public
parseEmail(Request¬†$request) : mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-17">Parameters<a class="hash-link" href="#parameters-17" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="tags-3">Tags<a class="hash-link" href="#tags-3" title="Direct link to heading">‚Äã</a></h5><p>throws</p><p>Exception</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-17">Return values<a class="hash-link" href="#return-values-17" title="Direct link to heading">‚Äã</a></h5><p>mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="processunmappedrequests">processUnmappedRequests()<a class="hash-link" href="#processunmappedrequests" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 491</p><p>This method handles the job queue on basis of mapping for recent saved active campaign</p><p><code>public
processUnmappedRequests(Request¬†$request) : JsonResponse</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-18">Parameters<a class="hash-link" href="#parameters-18" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-18">Return values<a class="hash-link" href="#return-values-18" title="Direct link to heading">‚Äã</a></h5><p>JsonResponse
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="removescriptsusingdom">removeScriptsUsingDom()<a class="hash-link" href="#removescriptsusingdom" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 467</p><p><code>public
removeScriptsUsingDom(mixed¬†$html) : mixed</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-19">Parameters<a class="hash-link" href="#parameters-19" title="Direct link to heading">‚Äã</a></h5><p>$html : mixed</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-19">Return values<a class="hash-link" href="#return-values-19" title="Direct link to heading">‚Äã</a></h5><p>mixed
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="saveemailmapping">saveEmailMapping()<a class="hash-link" href="#saveemailmapping" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 163</p><p>This method is used to save the mapping from front end
important param is mapping (It contains all xpaths for all data that needs to be parsed)</p><p><code>public
saveEmailMapping(Request¬†$request) : false|string</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-20">Parameters<a class="hash-link" href="#parameters-20" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="tags-4">Tags<a class="hash-link" href="#tags-4" title="Direct link to heading">‚Äã</a></h5><p>throws</p><p>Exception</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-20">Return values<a class="hash-link" href="#return-values-20" title="Direct link to heading">‚Äã</a></h5><p>false|string
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="stringbetweentwostrings">stringBetweenTwoStrings()<a class="hash-link" href="#stringbetweentwostrings" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 527</p><p>This function is used to return the string between two strings
based on conditions if starting &amp; ending strings are empty or not</p><p><code>public
stringBetweenTwoStrings(¬†$str, ¬†$starting\_word, ¬†$ending\_word) : bool|string</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-21">Parameters<a class="hash-link" href="#parameters-21" title="Direct link to heading">‚Äã</a></h5><p>$str : </p><p>$starting<!-- -->_<!-- -->word : </p><p>$ending<!-- -->_<!-- -->word : </p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-21">Return values<a class="hash-link" href="#return-values-21" title="Direct link to heading">‚Äã</a></h5><p>bool|string
‚Äî</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="validateemailfile">validateEmailFile()<a class="hash-link" href="#validateemailfile" title="Direct link to heading">‚Äã</a></h4><p><a href="/docs/modules/BCC/files/bcctoolcontroller.html">BccToolController.php</a> : 132</p><p>This method is used to validate the input eml format file that is uploaded from front end</p><p><code>public
validateEmailFile(Request¬†$request) : JsonResponse</code></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="parameters-22">Parameters<a class="hash-link" href="#parameters-22" title="Direct link to heading">‚Äã</a></h5><p>$request : Request</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="return-values-22">Return values<a class="hash-link" href="#return-values-22" title="Direct link to heading">‚Äã</a></h5><p>JsonResponse
‚Äî</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/modules/BCC/reference.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/modules/BCC/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/modules/BCC/routes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Routes</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sidebar_position-1" class="table-of-contents__link toc-highlight">sidebar_position: 1</a></li><li><a href="#bcctoolcontroller" class="table-of-contents__link toc-highlight">BccToolController</a><ul><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3df98ca2.js"></script>
<script src="/assets/js/main.cf28233e.js"></script>
</body>
</html>